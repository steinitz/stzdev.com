import{u as E,r as n,i as m}from"./main-DjDY-E1F.js";function h(e){const[u,r]=n.useState(),[i,v]=n.useState(),[b,s]=n.useState(),[w,g]=n.useState(),[D,d]=n.useState("idle"),c=n.useCallback(async a=>{var l,o,S,f;d("pending"),r(Date.now()),v(a);try{const t=await e.fn(a);return await((l=e.onSuccess)==null?void 0:l.call(e,{variables:a,data:t})),await((o=e.onSettled)==null?void 0:o.call(e,{variables:a,data:t,error:void 0})),d("success"),s(void 0),g(t),t}catch(t){(S=e.onError)==null||S.call(e,{variables:a,error:t}),(f=e.onSettled)==null||f.call(e,{variables:a,data:void 0,error:t}),d("error"),s(t)}},[e.fn]),y=n.useCallback(a=>{a.preventDefault(),c(new FormData(a.target))},[c,i]);return{status:D,variables:i,submittedAt:u,mutate:c,error:b,data:w,handleSubmit:y}}function A(e){const u=E();return h({...e,onSettled:async r=>{var i;m(r.data)?u.navigate({...r.data}):m(r.error)&&u.navigate({...r.error}),u.invalidate(),await((i=e.onSettled)==null?void 0:i.call(e,r))}})}export{A as u};
